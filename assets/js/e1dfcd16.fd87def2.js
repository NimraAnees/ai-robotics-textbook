"use strict";(globalThis.webpackChunkai_robotics_textbook=globalThis.webpackChunkai_robotics_textbook||[]).push([[9059],{5753:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"module-1-robotic-nervous-system/chapter-3","title":"Chapter 3: Launch Files and Parameters","description":"This chapter covers ROS 2 launch files and parameter management, essential tools for configuring and starting complex robotic systems with multiple nodes.","source":"@site/docs/module-1-robotic-nervous-system/chapter-3.md","sourceDirName":"module-1-robotic-nervous-system","slug":"/module-1-robotic-nervous-system/chapter-3","permalink":"/ai-robotics-textbook/docs/module-1-robotic-nervous-system/chapter-3","draft":false,"unlisted":false,"editUrl":"https://github.com/humonide-book/ai-robotics-textbook/edit/main/docs/module-1-robotic-nervous-system/chapter-3.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_label":"Chapter 3: Launch Files and Parameters","sidebar_position":3},"sidebar":"textbookSidebar","previous":{"title":"Module 1: Robotic Nervous System (ROS 2)","permalink":"/ai-robotics-textbook/docs/module-1-robotic-nervous-system/"},"next":{"title":"Mini-Project: ROS 2 Control Stack","permalink":"/ai-robotics-textbook/docs/module-1-robotic-nervous-system/mini-project"}}');var i=r(4848),t=r(8453);const o={sidebar_label:"Chapter 3: Launch Files and Parameters",sidebar_position:3},s="Chapter 3: Launch Files and Parameters",c={},l=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction to Launch Files",id:"introduction-to-launch-files",level:2},{value:"Creating Launch Files",id:"creating-launch-files",level:2},{value:"Basic Launch File Structure",id:"basic-launch-file-structure",level:3},{value:"Launch File with Parameters",id:"launch-file-with-parameters",level:3},{value:"Parameter Management",id:"parameter-management",level:2},{value:"Parameter Files",id:"parameter-files",level:3},{value:"Loading Parameters in Launch Files",id:"loading-parameters-in-launch-files",level:3},{value:"Advanced Launch Concepts",id:"advanced-launch-concepts",level:2},{value:"Conditional Launch",id:"conditional-launch",level:3},{value:"Including Other Launch Files",id:"including-other-launch-files",level:3},{value:"Practical Example: Humanoid Robot Launch",id:"practical-example-humanoid-robot-launch",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Organize Launch Files",id:"organize-launch-files",level:3},{value:"Parameter Management",id:"parameter-management-1",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Launch Commands",id:"launch-commands",level:2},{value:"Summary",id:"summary",level:2},{value:"Exercises",id:"exercises",level:2},{value:"Next Steps",id:"next-steps",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"chapter-3-launch-files-and-parameters",children:"Chapter 3: Launch Files and Parameters"})}),"\n",(0,i.jsx)(n.p,{children:"This chapter covers ROS 2 launch files and parameter management, essential tools for configuring and starting complex robotic systems with multiple nodes."}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"After completing this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create and use launch files to start multiple nodes simultaneously"}),"\n",(0,i.jsx)(n.li,{children:"Configure node parameters through launch files"}),"\n",(0,i.jsx)(n.li,{children:"Manage complex robot configurations using parameter files"}),"\n",(0,i.jsx)(n.li,{children:"Use command-line arguments with launch files"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"introduction-to-launch-files",children:"Introduction to Launch Files"}),"\n",(0,i.jsx)(n.p,{children:"Launch files are a crucial component of ROS 2 that allow you to start multiple nodes with a single command. They provide a way to define complex robot configurations and ensure that all necessary components start with the correct parameters and in the correct order."}),"\n",(0,i.jsx)(n.p,{children:"Launch files replace the launch files from ROS 1 but use a different implementation based on Python rather than XML. This provides more flexibility and the ability to use conditional logic, loops, and other programming constructs."}),"\n",(0,i.jsx)(n.h2,{id:"creating-launch-files",children:"Creating Launch Files"}),"\n",(0,i.jsx)(n.h3,{id:"basic-launch-file-structure",children:"Basic Launch File Structure"}),"\n",(0,i.jsxs)(n.p,{children:["A launch file is a Python file that defines a ",(0,i.jsx)(n.code,{children:"generate_launch_description()"})," function:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_package',\r\n            executable='my_node',\r\n            name='my_node_name',\r\n            parameters=[\r\n                {'param1': 'value1'},\r\n                {'param2': 42},\r\n            ]\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h3,{id:"launch-file-with-parameters",children:"Launch File with Parameters"}),"\n",(0,i.jsx)(n.p,{children:"Launch files can accept arguments that can be passed from the command line:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    # Declare launch arguments\r\n    use_sim_time = DeclareLaunchArgument(\r\n        'use_sim_time',\r\n        default_value='false',\r\n        description='Use simulation time'\r\n    )\r\n\r\n    robot_name = DeclareLaunchArgument(\r\n        'robot_name',\r\n        default_value='my_robot',\r\n        description='Name of the robot'\r\n    )\r\n\r\n    return LaunchDescription([\r\n        use_sim_time,\r\n        robot_name,\r\n\r\n        Node(\r\n            package='my_package',\r\n            executable='controller_node',\r\n            name=[LaunchConfiguration('robot_name'), '_controller'],\r\n            parameters=[\r\n                {'use_sim_time': LaunchConfiguration('use_sim_time')},\r\n                {'robot_name': LaunchConfiguration('robot_name')},\r\n            ]\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"parameter-management",children:"Parameter Management"}),"\n",(0,i.jsx)(n.h3,{id:"parameter-files",children:"Parameter Files"}),"\n",(0,i.jsx)(n.p,{children:"Parameters can be stored in YAML files for easy management and sharing:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# my_robot_params.yaml\r\n/**:\r\n  ros__parameters:\r\n    use_sim_time: false\r\n    update_rate: 50.0\r\n    publish_tf: true\r\n\r\ncontroller_node:\r\n  ros__parameters:\r\n    kp: 1.0\r\n    ki: 0.1\r\n    kd: 0.05\r\n\r\nsensor_node:\r\n  ros__parameters:\r\n    frame_id: 'base_link'\r\n    range_min: 0.1\r\n    range_max: 10.0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"loading-parameters-in-launch-files",children:"Loading Parameters in Launch Files"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\ndef generate_launch_description():\r\n    # Get the package share directory\r\n    pkg_share = get_package_share_directory('my_robot_package')\r\n\r\n    # Path to parameter file\r\n    params_file = os.path.join(pkg_share, 'config', 'my_robot_params.yaml')\r\n\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_robot_package',\r\n            executable='controller_node',\r\n            name='controller_node',\r\n            parameters=[params_file]\r\n        ),\r\n        Node(\r\n            package='my_robot_package',\r\n            executable='sensor_node',\r\n            name='sensor_node',\r\n            parameters=[params_file]\r\n        )\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-launch-concepts",children:"Advanced Launch Concepts"}),"\n",(0,i.jsx)(n.h3,{id:"conditional-launch",children:"Conditional Launch"}),"\n",(0,i.jsx)(n.p,{children:"Launch files can include conditional logic:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription, LaunchCondition\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    use_camera = DeclareLaunchArgument(\r\n        'use_camera',\r\n        default_value='true',\r\n        description='Whether to start camera node'\r\n    )\r\n\r\n    camera_node = Node(\r\n        package='camera_package',\r\n        executable='camera_node',\r\n        name='camera_node',\r\n        condition=LaunchCondition(\r\n            expression=[LaunchConfiguration('use_camera')]\r\n        )\r\n    )\r\n\r\n    return LaunchDescription([\r\n        use_camera,\r\n        camera_node\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h3,{id:"including-other-launch-files",children:"Including Other Launch Files"}),"\n",(0,i.jsx)(n.p,{children:"You can include other launch files to build complex systems:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import IncludeLaunchDescription\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\ndef generate_launch_description():\r\n    # Include another launch file\r\n    other_launch = IncludeLaunchDescription(\r\n        PythonLaunchDescriptionSource(\r\n            os.path.join(\r\n                get_package_share_directory('other_package'),\r\n                'launch',\r\n                'other_launch.py'\r\n            )\r\n        )\r\n    )\r\n\r\n    return LaunchDescription([\r\n        other_launch,\r\n        # Additional nodes...\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"practical-example-humanoid-robot-launch",children:"Practical Example: Humanoid Robot Launch"}),"\n",(0,i.jsx)(n.p,{children:"Here's a practical example of a launch file for a humanoid robot:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument, TimerAction\r\nfrom launch.conditions import IfCondition\r\nfrom launch.substitutions import LaunchConfiguration\r\nfrom launch_ros.actions import Node, ComposableNodeContainer\r\nfrom launch_ros.descriptions import ComposableNode\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\ndef generate_launch_description():\r\n    # Declare launch arguments\r\n    use_sim_time = DeclareLaunchArgument(\r\n        'use_sim_time',\r\n        default_value='false',\r\n        description='Use simulation time if true'\r\n    )\r\n\r\n    robot_name = DeclareLaunchArgument(\r\n        'robot_name',\r\n        default_value='humanoid_robot',\r\n        description='Name of the robot'\r\n    )\r\n\r\n    use_rviz = DeclareLaunchArgument(\r\n        'use_rviz',\r\n        default_value='true',\r\n        description='Whether to launch RViz'\r\n    )\r\n\r\n    # Get package directories\r\n    pkg_share = get_package_share_directory('humanoid_robot_bringup')\r\n    robot_description_path = os.path.join(pkg_share, 'urdf', 'humanoid_robot.urdf')\r\n\r\n    # Robot state publisher\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        name='robot_state_publisher',\r\n        parameters=[\r\n            {'use_sim_time': LaunchConfiguration('use_sim_time')},\r\n            {'robot_description': open(robot_description_path).read()}\r\n        ]\r\n    )\r\n\r\n    # Joint state publisher\r\n    joint_state_publisher = Node(\r\n        package='joint_state_publisher',\r\n        executable='joint_state_publisher',\r\n        name='joint_state_publisher',\r\n        parameters=[\r\n            {'use_sim_time': LaunchConfiguration('use_sim_time')}\r\n        ]\r\n    )\r\n\r\n    # Controller manager\r\n    controller_manager = Node(\r\n        package='controller_manager',\r\n        executable='ros2_control_node',\r\n        parameters=[\r\n            robot_description_path,\r\n            {'use_sim_time': LaunchConfiguration('use_sim_time')}\r\n        ],\r\n        remappings=[\r\n            ('/tf', 'tf'),\r\n            ('/tf_static', 'tf_static')\r\n        ]\r\n    )\r\n\r\n    # RViz\r\n    rviz = Node(\r\n        package='rviz2',\r\n        executable='rviz2',\r\n        name='rviz2',\r\n        arguments=['-d', os.path.join(pkg_share, 'rviz', 'humanoid_robot.rviz')],\r\n        condition=IfCondition(LaunchConfiguration('use_rviz')),\r\n        parameters=[\r\n            {'use_sim_time': LaunchConfiguration('use_sim_time')}\r\n        ]\r\n    )\r\n\r\n    return LaunchDescription([\r\n        use_sim_time,\r\n        robot_name,\r\n        use_rviz,\r\n        robot_state_publisher,\r\n        joint_state_publisher,\r\n        controller_manager,\r\n        rviz\r\n    ])\n"})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"organize-launch-files",children:"Organize Launch Files"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Group related nodes in separate launch files"}),"\n",(0,i.jsx)(n.li,{children:"Use descriptive names for launch files"}),"\n",(0,i.jsx)(n.li,{children:"Keep launch files focused on specific functionality"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"parameter-management-1",children:"Parameter Management"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use YAML files for complex parameter sets"}),"\n",(0,i.jsx)(n.li,{children:"Group related parameters logically"}),"\n",(0,i.jsx)(n.li,{children:"Use meaningful parameter names"}),"\n",(0,i.jsx)(n.li,{children:"Document parameter purposes"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Validate parameters at startup"}),"\n",(0,i.jsx)(n.li,{children:"Provide meaningful error messages"}),"\n",(0,i.jsx)(n.li,{children:"Use appropriate default values"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"launch-commands",children:"Launch Commands"}),"\n",(0,i.jsx)(n.p,{children:"To run a launch file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Basic launch\r\nros2 launch my_package my_launch.py\r\n\r\n# With arguments\r\nros2 launch my_package my_launch.py use_sim_time:=true robot_name:=my_robot\r\n\r\n# With parameters from file\r\nros2 launch my_package my_launch.py --params-file path/to/params.yaml\n"})}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"Launch files and parameters are essential for managing complex robotic systems. They allow you to start multiple nodes with proper configurations and ensure that your robot system is set up correctly for different operating conditions."}),"\n",(0,i.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Launch File Exercise"}),": Create a launch file that starts a joint state publisher, robot state publisher, and a simple controller node for a basic robot."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parameter Exercise"}),": Create a YAML parameter file for a mobile robot with differential drive, including parameters for wheel separation, wheel radius, and maximum velocities."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Conditional Launch Exercise"}),": Modify your launch file to conditionally start a visualization node based on a launch argument."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(n.p,{children:"In the next chapter, we'll explore URDF (Unified Robot Description Format) for modeling humanoid robots, which will be used extensively with the launch files and parameters you've learned about in this chapter."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>s});var a=r(6540);const i={},t=a.createContext(i);function o(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);